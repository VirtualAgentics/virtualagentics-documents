
| title                               | status       | audience                                    | authors                             | version | date       | gpt_model         |
|-------------------------------------|--------------|---------------------------------------------|-------------------------------------|---------|------------|-------------------|
| VA-WorkMail Module – VirtualAgentics| Stable Draft | Internal – DevOps/Infra Team, Contributors  | VirtualAgentics Infrastructure Team | 1.0     | 2025-06-14 | Generated by ChatGPT-4.5 |

# VA-WorkMail Terraform Module

This documentation describes the VA-WorkMail Terraform module, which automates the setup of AWS WorkMail for VirtualAgentics, providing corporate email infrastructure.

## Overview

The **VA-WorkMail** module automates creation and configuration of the AWS WorkMail organization, domain associations, and user mailboxes. It ensures consistent deployment and verification of the custom email domain (virtualagentics.ai), critical for official communication and AWS account alias management in Phase 1.

## Scope/Purpose

The module provisions:

- **AWS WorkMail Organization:** Container for email resources, created in region eu-central-1, incurring minimal AWS costs.
- **WorkMail Domain Association:** Adds the domain `virtualagentics.ai` to the organization. Domain verification via DNS (handled externally through VA-Route53) is required.
- **WorkMail User/Mailbox:** Creates mailbox users such as `prod-mailbox` with display name "Prod Team Mailbox".
- **Email Alias Management:** Configures email aliases like `prod@virtualagentics.ai` forwarding to the created mailbox user, supporting AWS account email management.
- **Integration with SES:** Enables email sending via AWS SES, leveraging necessary DNS records (DKIM, SPF) managed by the VA-Route53 module.

## Assumptions/Constraints

- Assumes existing Route53 hosted zone for domain DNS verification.
- AWS WorkMail organization limits: typically one per region per account.
- Mailbox passwords should be managed securely, recommended via AWS Secrets Manager or Terraform sensitive variables.
- Domain verification status depends on DNS setup completion; verify in WorkMail console after Terraform apply.

## Usage Example

```hcl
module "workmail" {
  source                  = "./modules/va-workmail"
  organization_name       = "VirtualAgenticsProd"
  domain_name             = "virtualagentics.ai"
  create_mailbox_user     = true
  mailbox_user_name       = "prod-mailbox"
  mailbox_display_name    = "Prod Team Mailbox"
  mailbox_password        = var.workmail_mailbox_password
  enable_alias_forwarding = true
  alias_forward_target    = "prod-mailbox"
  tags = {
    Project     = "VirtualAgentics",
    Environment = "prod",
    Owner       = "infra",
    Purpose     = "workmail-setup"
  }
}
```

## Inputs
(as previously detailed)

## Outputs
(as previously detailed)

## Example Use Cases
(as previously detailed)

## Dependencies
(as previously detailed)

## Testing
(as previously detailed)

## Security Considerations
(as previously detailed)

## Versioning
(as previously detailed)
