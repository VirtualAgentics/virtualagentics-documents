---
title: "Agent Communication and Event Structure – Virtual Agentics"
status: "Stable Draft"
audience: "Internal (Engineering, AI/ML, DevOps, Security); External (Auditors, Stakeholders)"
authors: "VirtualAgentics Core Team (generated by ChatGPT GPT-4.5, curated by Ben)"
version: "1.0"
date: "2025-06-06"
gpt_model: "Drafted by GPT-4.5 Deep Research"
---

# Agent Communication and Event Structure: Virtual Agentics

## Purpose

This document describes the inter-agent communication protocols, event-driven workflow, and data exchange standards used in the Virtual Agentics multi-agent system. It ensures all agent actions are auditable, traceable, and clearly defined for both automation and compliance.

---

## 1. Communication Principles

- **Event-Driven Architecture:** All agent collaboration is mediated through clearly defined events (messages) published to a bus (SNS, SQS, or EventBridge), never via direct function calls or implicit side effects.
- **Explicit Contracts:** Every event type is documented with schema, allowed initiators, listeners, and state transitions.
- **Auditability:** Every message/event is logged with source, timestamp, payload, and delivery status.
- **Loose Coupling:** Agents do not have hardcoded references to other agents; subscriptions are via documented topics/events.
- **Security:** All message channels are protected via least-privilege IAM policies and encrypted at rest/in transit.

---

## 2. Communication Patterns

### a) Direct Eventing (Point-to-Point)

- Agent A emits an event to a queue or topic, consumed by Agent B
- Used for explicit task delegation or escalation
- Example: ContentGen agent publishes `ContentReadyEvent` for Review agent

### b) Publish/Subscribe (Broadcast)

- Agent emits events on a topic (SNS/EventBridge)
- Multiple agents can subscribe and react to the same event
- Example: NewContent event triggers notifications, analytics, and backup agents

### c) Command/Response

- Agent issues a command event (`Request*`) and expects a response event (`*Completed`, `*Failed`)
- Ensures decoupled, asynchronous workflows with audit trails

---

## 3. Event Types and Schema

All events are structured JSON with strict schema. Example event contract:

```json
{
  "event_type": "ContentReady",
  "source_agent": "va-agent-contentgen-prod",
  "timestamp": "2025-06-06T12:34:56Z",
  "correlation_id": "uuid-1234",
  "payload": {
    "content_id": "abc123",
    "title": "How to Build Autonomous AI Agents",
    "tags": ["ai", "autonomy"],
    "review_required": true
  }
}
```

### Standard Fields

- `event_type` (string): Name of event, e.g., `ContentReady`
- `source_agent` (string): Agent ID (see [Agent_Structure_and_Roles.md](Agent_Structure_and_Roles.md))
- `timestamp` (RFC3339): UTC
- `correlation_id` (string): Unique for related events/flows
- `payload` (object): Event-specific details

---

## 4. Core Event Types

| Event Name            | Initiator                  | Listeners                 | Typical Payload Fields            | Purpose/Trigger            |
|-----------------------|----------------------------|---------------------------|-----------------------------------|----------------------------|
| ContentRequest        | CMO Agent                  | ContentGen Agent          | topic, length, urgency            | Request article generation  |
| ContentReady          | ContentGen Agent           | Review, Publish, Notify   | content_id, title, review flag    | Content ready for review    |
| ReviewCompleted       | Review Agent               | Publish Agent, CMO        | content_id, approved/rejected     | Review done, ready to post  |
| PublishCompleted      | Publish Agent              | CMO, Audit                | content_id, url, status           | Content published           |
| Alert                | Any agent                  | CTO, Compliance, Audit    | severity, message, context        | Notify on issue/anomaly     |
| BudgetThresholdCrossed| CFO Agent (via automation) | CEO, Audit, Compliance    | account, amount, threshold        | Cost anomaly/limit crossed  |
| ResearchProposal      | R&D Agent                  | CTO, CEO                  | proposal_id, summary, topic       | New tech/strategy proposed  |
| AgentOnboarded        | HR Agent                   | CAgO, Audit, CTO          | agent_id, role, permissions       | New agent created           |
| CredentialRotated     | Compliance Agent           | All affected agents       | secret_id, agent_ids              | Notify of new secrets       |

*(Full list is tracked in this document as new workflows are introduced)*

---

## 5. Event Topics and Channels

| Channel / Topic Name           | Purpose                      | Publisher(s)           | Subscriber(s)        |
|-------------------------------|------------------------------|------------------------|----------------------|
| va-prod-content-events         | Content creation/review      | ContentGen, Review     | CMO, Notify, Audit   |
| va-prod-ops-events             | Incidents/alerts             | All ops agents         | CTO, Audit           |
| va-prod-compliance-events      | Security/compliance actions  | Compliance agent       | CTO, CEO, Audit      |
| va-prod-finance-events         | Billing, trading, reporting  | CFO, Trading agent     | CEO, Audit           |

All channel names follow [Naming_Conventions.md](Naming_Conventions.md).

---

## 6. Event Flow Examples

### Content Generation Pipeline

1. CMO Agent emits `ContentRequest` to `va-prod-content-events`
2. ContentGen Agent generates article, emits `ContentReady`
3. Review Agent reviews, emits `ReviewCompleted`
4. Publish Agent posts content, emits `PublishCompleted`
5. Notifications/analytics agents consume and log results

### Onboarding New Agent

1. HR Agent emits `AgentOnboarded` with agent details
2. CAgO Agent approves and issues IAM role
3. Compliance Agent monitors and records

---

## 7. Logging, Monitoring, and Replay

- All event traffic is logged in CloudWatch Logs (by topic/channel)
- Each event includes full context for trace and replay
- Message delivery failures are tracked (DLQs configured for SQS)
- Replay of events for audit or debugging can be done from logs

---

## 8. Security and Compliance

- All events must be encrypted in transit (HTTPS/SNS/SQS policies)
- Access to publish/subscribe is strictly via least-privilege IAM roles (see [Naming_Conventions.md](Naming_Conventions.md))
- Sensitive payloads (e.g., credentials) must not be transmitted in plain text events; use AWS Secrets Manager references

---

## 9. Change Control and Documentation

- All new event types and schema changes must be PR’d and approved, documented here
- Deprecated events and channels must be explicitly listed, with migration plan and date

---

## 10. References

- [Agent_Structure_and_Roles.md](Agent_Structure_and_Roles.md)
- [Naming_Conventions.md](Naming_Conventions.md)
- [Technical_Specification_v1.md](Technical_Specification_v1.md)
- Source: "Agent Communication and Event Structure.pdf"

---

*End of document*
