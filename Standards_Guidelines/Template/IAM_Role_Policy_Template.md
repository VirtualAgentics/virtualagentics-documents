---
title: "IAM Role and Policy Definition Template – Virtual Agentics"
status: "Draft"
audience: "Internal – Security, DevOps, Compliance; External – Auditors"
authors: "VirtualAgentics Core Team"
version: "0.1"
date: "<today’s date>"
gpt_model: "Generated by ChatGPT-4.1"
---

# IAM Role and Policy Definition Template

This template is to be used for documenting IAM roles in the VirtualAgentics project, ensuring least-privilege principles are well-documented and auditable for all critical AWS infrastructure components.

---

## 1. Role Overview

**Role Name:** `<ROLE_NAME>`  
_Describe the primary purpose of this IAM role. Include which component or agent uses this role and why it’s needed._

Example:  
>This role is assumed by the `<AGENT_NAME>` Lambda to allow it to access necessary AWS resources.

---

## 2. Trust Relationship

_Specify which entity (user, service, or principal) can assume this role. Provide the trust policy JSON or a summary here._

Example:  
>This role can be assumed by the `<SERVICE>` (e.g., AWS Lambda service for `<AGENT_NAME>`, specified by the principal `lambda.amazonaws.com`).

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "lambda.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
```
_(Replace with the actual trust policy or describe in words, e.g., “Trusts the lambda service in account <ACCOUNT_ID>”)_

---

## 3. Permissions Policy

### 3.1 Policy Summary

_Summarize the permissions in plain language._

Example:  
>This role allows `<AGENT_NAME>` to read from S3 bucket `<XYZ_BUCKET>` and publish events to EventBridge, as well as write logs to CloudWatch.

_List the services and the general level of access (read/write)._  
_Ensure only specific resources are allowed (avoid `*` if possible)._

### 3.2 Policy Document

_Embed the JSON or Terraform code for the policy defining these permissions, or provide a summary table of actions and resources._

**Example IAM policy excerpt:**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowReadWriteContentS3",
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::<YOUR_BUCKET_NAME>/*"
    },
    {
      "Sid": "AllowEventBridgePutEvents",
      "Effect": "Allow",
      "Action": "events:PutEvents",
      "Resource": "*"
    },
    {
      "Sid": "AllowWriteCloudWatchLogs",
      "Effect": "Allow",
      "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
      ],
      "Resource": "arn:aws:logs:*:*:*"
    }
  ]
}
```
_If the full policy is large, list key actions/resources in a table:_

| **Service**                  | **Actions**               | **Resource**                              |
|------------------------------|---------------------------|-------------------------------------------|
| S3 (Content Bucket)          | s3:GetObject, s3:PutObject | arn:aws:s3:::<CONTENT_BUCKET>/*           |
| EventBridge                  | events:PutEvents           | *                                         |
| CloudWatch Logs              | logs:CreateLogGroup, logs:PutLogEvents | arn:aws:logs:*:*:*          |
| ...                          | ...                       | ...                                       |

_Least Privilege Reminder: Confirm all permissions follow least-privilege principles; avoid broad wildcards where possible._

---

## 4. Usage and Scope

- **Component:** _Which AWS Lambda function or component uses this role? (e.g., `<AGENT_NAME>` Lambda)_
- **Accounts/Environments:** _In which AWS accounts/environments does this role exist? (e.g., dev/prod)_
- **Provisioning/Management:** _How is the role created and managed? (e.g., defined in Terraform – “See Terraform module `iam_roles.tf` for provisioning details”)_

---

## 5. Security Considerations

- **MFA or Human Access:** _Usually Lambda roles are not assumed by humans, but if any human use is allowed, document it here._
- **Key Rotation:** _If this role uses inline policies with access to secrets, or uses access keys (not typical for Lambda), explain how rotation is handled._
- **Policy Change Process:** _Example: “Changes to this role’s policy require approval from the security team.”_
- **Integration with Other Security Controls:** _Example: “This role’s actions are logged in CloudTrail and monitored. See `Monitoring_and_Alerting.md` for related alerting controls.”_
- **Guardrails:** _Mention any use of AWS SCPs, IAM Access Analyzer, or other organizational guardrails that further restrict this role._

---

## 6. Example Usage (Optional)

_Provide an example showing this role in action:_

- **CloudWatch Log Example:** _Paste a sample log line where `<AGENT_NAME>` assumes the role and accesses a resource._
- **Terraform Attachment Example:**
```hcl
resource "aws_lambda_function" "<AGENT_NAME>" {
  ...
  role = aws_iam_role.<ROLE_NAME>.arn
}
```

---

## 7. Revision History

_Document any changes to the role’s permissions over time for audit purposes (dates, what changed, and why)._

| **Date**     | **Change Description**                          | **Changed By**    |
|--------------|-------------------------------------------------|-------------------|
| YYYY-MM-DD   | Initial creation                                | <AUTHOR>          |
| YYYY-MM-DD   | Added EventBridge permission                    | <AUTHOR>          |
| YYYY-MM-DD   | Updated S3 access for new bucket                | <AUTHOR>          |

---

*Note: Replace all placeholders such as `<ROLE_NAME>`, `<AGENT_NAME>`, `<YOUR_BUCKET_NAME>`, etc. Fill in the exact details for your role, and keep this documentation up to date with every change. Regularly review all permissions and update this document accordingly.*
