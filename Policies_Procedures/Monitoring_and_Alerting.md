---
title: "Monitoring and Alerting – Virtual Agentics"
status: "Stable Draft"
audience: "Internal (Engineering, Ops, Security, Compliance); External (Auditors, Stakeholders)"
authors: "VirtualAgentics Core Team (generated by ChatGPT GPT-4.5, curated by Ben)"
version: "1.0"
date: "2025-06-06"
gpt_model: "Drafted by GPT-4.5 Deep Research"
---

# Monitoring and Alerting: Virtual Agentics

## Purpose

This document defines the monitoring and alerting standards for Virtual Agentics AWS environments and critical workloads. It is the authoritative operational reference for service health, security, and compliance observability.

---

## 1. Principles

- **Observability is non-negotiable:** All critical infra, applications, and agents must be continuously monitored.
- **Automated alerting:** No critical event should go unnoticed; all alerts routed to accountable owners.
- **Audit and retention:** Logs and alert histories are retained for at least 1 year; security logs for ≥3 years.
- **Actionable alarms:** All alarms must have documented runbooks, owners, and severity classification.

---

## 2. Core Monitoring Tools

- **AWS CloudWatch:** Metrics, logs, dashboards, alarms (all services)
- **CloudTrail:** API audit logs (centralized in Log Archive)
- **AWS Config:** Resource compliance tracking, config change detection
- **SNS/SQS:** Alert notification and integration with automation/ops channels
- **(Optional) Prometheus/Grafana:** For advanced custom metrics/dashboards in later phases

---

## 3. Monitored Resources and Metrics

### a) Lambda Functions

- **Metrics:** Invocations, errors, duration, throttles, concurrent executions
- **Logs:** All invocations and errors sent to `/aws/lambda/<function-name>`
- **Alarms:** Error count >0, duration >80% of timeout, concurrent executions > planned max
- **DLQ monitoring:** SQS/SNS configured for failed executions

### b) DynamoDB

- **Metrics:** ThrottledRequests, Read/Write Capacity, Latency, SystemErrors
- **Alarms:** ThrottledRequests > 0, system errors, consumed capacity > 80% of provisioned (if not on-demand)

### c) S3 Buckets

- **Metrics:** NumberOfObjects, BucketSizeBytes, 4xx/5xx error rates (via CloudFront if public)
- **Alarms:** Unusual 4xx/5xx errors, bucket policy changes (Config), failed replication

### d) CloudFront

- **Metrics:** Requests, 4xx/5xx error rates, OriginLatency
- **Alarms:** 5xx error rate > 1% in any 5-minute window

### e) API Gateway

- **Metrics:** 4xx/5xx error rates, Latency, IntegrationLatency
- **Alarms:** 5xx error rate > 1%, Latency > 1s

### f) IAM/Security

- **CloudTrail logs:** UnauthorizedOperation, ConsoleLoginFailure, policy changes
- **Alarms:** Any unauthorized attempt or config drift

### g) Cost/Budget

- **Budget alerts:** AWS Budgets for organization/account/project
- **Alarms:** Spend > 70%, 90%, or 100% of budget, anomaly detection triggers

---

## 4. Alert Routing and Notification

- **All critical alerts routed via SNS:** 
  - `va-prod-ops-alerts` topic for engineering/on-call
  - Security/compliance alerts to designated compliance mailbox and Slack/Teams (if configured)
- **Alert runbooks:** Linked in CloudWatch alarm description or internal wiki

---

## 5. Dashboards and Visualization

- **CloudWatch Dashboards:** Summary of health for Lambdas, DynamoDB, S3, API Gateway, CloudFront, billing
- **Grafana dashboards:** For advanced visualizations as implemented in future phases

---

## 6. Log Retention and Archiving

- **CloudWatch Logs:** 30 days by default, up to 1 year for critical functions
- **CloudTrail:** ≥3 years, exported to Log Archive S3 bucket
- **S3 access logs:** At least 1 year

---

## 7. Incident Response and Review

- **Alert escalation:** All alerts must have documented owner/escalation (Slack/email/SNS)
- **Post-incident review:** All critical alarms trigger review and log/cause documentation
- **Continuous improvement:** Alarm thresholds, routing, and dashboards reviewed quarterly

---

## 8. Compliance and Change Control

- All monitoring/alerting configuration defined in Terraform/IaC, reviewed via PR.
- No manual alarm changes without PR and runbook/documentation update.
- Audit trail for all alarm and dashboard changes.

---

## 9. References

- [Technical_Specification_v1.md](../Technical_Specification_v1.md)
- [[Backup and DR Strategy](../Backup_and_DR_Strategy.md)](../[Backup and DR Strategy](../Backup_and_DR_Strategy.md))
- [[Compliance and Security Policies](../Compliance_and_Security_Policies.md)](../[Compliance and Security Policies](../Compliance_and_Security_Policies.md))
- Source: "Monitoring & Alerting_ CloudWatch Alarms for AWS Services.pdf"

---

*End of document*

## Alert Notifications

All critical CloudWatch alarms explicitly route alerts via SNS to:

- Email: `alerts@virtualagentics.ai`
- Slack Channel: `#alerts-virtualagentics` (if configured)

```hcl
resource "aws_sns_topic" "alerts_topic" {
  name = "va-prod-ops-alerts"
}

resource "aws_sns_topic_subscription" "email_subscription" {
  topic_arn = aws_sns_topic.alerts_topic.arn
  protocol  = "email"
  endpoint  = "alerts@virtualagentics.ai"
}
```
